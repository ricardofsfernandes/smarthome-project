<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>SmartHome - Lista de Compras</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; padding: 20px; }
        h1 { color: #00ff88; }
        .item { background: #1e1e1e; padding: 10px; margin: 5px 0; border-radius: 5px; border-left: 5px solid #00ff88; }
    </style>
</head>
<body>
    <h1>Minha Lista de Compras</h1>

    <div style="margin-bottom: 20px;">
        <input type="text" id="itemNome" placeholder="Item (ex: Pão)">
        <input type="number" id="itemQtd" placeholder="Qtd" style="width: 50px;">
        <button onclick="adicionarItem()">Adicionar</button>
    </div>

    <div id="lista">
        <p>A carregar lista do servidor...</p>
    </div>

    <script>
        // Função para carregar (já tens esta)
        async function carregarCompras() {
            const resposta = await fetch('http://localhost:3000/compras');
            const dados = await resposta.json();
            const divLista = document.getElementById('lista');
            divLista.innerHTML = ''; 
            dados.forEach(item => {
                divLista.innerHTML += `<div class="item">${item.item} - Qtd: ${item.quantidade}</div>`;
            });
        }

        // NOVA FUNÇÃO: Enviar para o servidor
        async function adicionarItem() {
            const nome = document.getElementById('itemNome').value;
            const qtd = document.getElementById('itemQtd').value;

            await fetch('http://localhost:3000/compras', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ item: nome, quantidade: parseInt(qtd) })
            });

            // Limpa os campos e recarrega a lista
            document.getElementById('itemNome').value = '';
            document.getElementById('itemQtd').value = '';
            carregarCompras();
        }

        carregarCompras();
    </script>
</body>
</html>